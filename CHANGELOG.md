# 変更履歴

## 2025-04-12: ファイル名入力機能の実装

### 機能追加概要
ユーザーがダウンロード前にファイル名を指定できる機能を追加しました。

### 追加・修正点
1. ファイル名入力欄の追加:
   - 出力設定セクションにファイル名入力欄を追加
   - ファイル名入力欄のスタイルを設定（青い枠線で強調）

2. ダウンロード前のファイル名確認プロンプトの実装:
   - 各ダウンロードボタン（画像、HTML、PDF）をクリックした時に、ファイル名が未設定の場合にプロンプトを表示
   - ファイル形式ごとにデフォルトのプレフィックスを設定（html2img_、download_、pdf_）

3. ユーザー指定のファイル名を使用したダウンロード:
   - 各ファイル形式（画像、HTML、PDF）でユーザー指定のファイル名を優先的に使用
   - ファイル名が指定されていない場合のみ、デフォルトのファイル名（日時付き）を使用

### 機能の使用方法
1. HTML入力後、プレビュー表示
2. 出力設定の「ファイル名」欄にダウンロードするファイル名を入力（拡張子不要）
3. 各種ダウンロードボタンをクリック
4. ファイル名が未入力の場合は、入力用プロンプトが表示されます

## 2025-04-09: プレビュー表示機能の修正

### 修正概要
「HTML変換・ダウンロードツール」のプレビュー表示機能に問題があったため、修正を実施しました。

### 問題点
1. プレビュー表示が正常に機能していませんでした
2. 主な原因:
   - JavaScriptコード内で `previewFrame` 変数が `html-preview-frame` というIDを参照していましたが、HTML内では `preview-frame` が指定されていた
   - `htmlPreview` 変数が実際にはHTMLに存在しない要素を参照していた

### 修正内容
1. プレビュー機能の修正:
   - `previewFrame` の取得部分を正しいID (`preview-frame`) に修正
   - 存在しない `htmlPreview` 変数の参照を適切に修正またはコメントアウト

2. 関連機能の修正:
   - クリアボタン処理の修正: プレビューフレームをクリアする処理を追加
   - 変換ボタン処理の修正: プレビューフレームが空の場合にHTMLを書き込む処理を追加
   - PDFダウンロードボタン処理の修正: 同様にプレビューフレームへの対応

### テスト結果
以下の機能すべてが正常に動作することを確認しました:
- プレビュー表示
- クリア機能
- 画像変換・ダウンロード
- HTMLダウンロード
- PDFダウンロード

### 推奨事項
- 今後のメンテナンスでは、HTMLとJavaScriptの要素ID一致を確認することを推奨
- 不要な変数や参照を削除・整理することで、コードの保守性を向上させること
